<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đạt Táo - Điện thoại chính hãng</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="logo">
                <h1>Đạt Táo</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#home">Trang chủ</a></li>
                    <li><a href="#products">Sản phẩm</a></li>
                    <li><a href="#about">Giới thiệu</a></li>
                    <li><a href="#contact">Liên hệ</a></li>
                    <?php if (isset($_SESSION['user_id'])): ?>
                        <li class="user-menu">
                            <a href="#" class="user-dropdown">
                                <i class="fas fa-user"></i> <?php echo htmlspecialchars($_SESSION['username']); ?>
                                <?php if ($_SESSION['is_admin']): ?>
                                    <span class="admin-badge">Admin</span>
                                <?php endif; ?>
                            </a>
                            <div class="dropdown-menu">
                                <?php if ($_SESSION['is_admin']): ?>
                                    <a href="admin/"><i class="fas fa-tachometer-alt"></i> Trang quản trị</a>
                                <?php endif; ?>
                                <a href="profile.php"><i class="fas fa-user"></i> Hồ sơ</a>
                                <a href="?logout=1"><i class="fas fa-sign-out-alt"></i> Đăng xuất</a>
                            </div>
                        </li>
                    <?php else: ?>
                        <li><a href="#" class="login-btn">Đăng nhập</a></li>
                        <li><a href="#" class="register-btn">Đăng ký</a></li>
                    <?php endif; ?>
                </ul>
            </nav>
            <div class="cart">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-count">0</span>
            </div>
        </div>
    </header>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Đăng nhập</h2>
            <?php if (isset($_SESSION['error'])): ?>
                <div class="alert alert-danger"><?php echo $_SESSION['error']; unset($_SESSION['error']); ?></div>
            <?php endif; ?>
            <?php if (isset($_SESSION['success'])): ?>
                <div class="alert alert-success"><?php echo $_SESSION['success']; unset($_SESSION['success']); ?></div>
            <?php endif; ?>
            <form action="auth.php" method="POST">
                <div class="form-group">
                    <label for="login-username">Tên đăng nhập hoặc Email:</label>
                    <input type="text" id="login-username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="login-password">Mật khẩu:</label>
                    <input type="password" id="login-password" name="password" required>
                </div>
                <div class="form-group">
                    <button type="submit" name="login" class="btn btn-primary">Đăng nhập</button>
                </div>
                <div class="form-group text-center">
                    <p>Chưa có tài khoản? <a href="#" class="switch-to-register">Đăng ký ngay</a></p>
                </div>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Đăng ký tài khoản</h2>
            <?php if (isset($_SESSION['error'])): ?>
                <div class="alert alert-danger"><?php echo $_SESSION['error']; unset($_SESSION['error']); ?></div>
            <?php endif; ?>
            <form action="auth.php" method="POST">
                <div class="form-group">
                    <label for="reg-username">Tên đăng nhập:</label>
                    <input type="text" id="reg-username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="reg-email">Email:</label>
                    <input type="email" id="reg-email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="reg-password">Mật khẩu:</label>
                    <input type="password" id="reg-password" name="password" required>
                </div>
                <div class="form-group">
                    <label for="reg-confirm-password">Xác nhận mật khẩu:</label>
                    <input type="password" id="reg-confirm-password" name="confirm_password" required>
                </div>
                <div class="form-group">
                    <label for="reg-fullname">Họ và tên:</label>
                    <input type="text" id="reg-fullname" name="fullname" required>
                </div>
                <div class="form-group">
                    <label for="reg-phone">Số điện thoại:</label>
                    <input type="tel" id="reg-phone" name="phone" required>
                </div>
                <div class="form-group">
                    <label for="reg-address">Địa chỉ:</label>
                    <textarea id="reg-address" name="address" rows="2" required></textarea>
                </div>
                <div class="form-group">
                    <button type="submit" name="register" class="btn btn-primary">Đăng ký</button>
                </div>
                <div class="form-group text-center">
                    <p>Đã có tài khoản? <a href="#" class="switch-to-login">Đăng nhập ngay</a></p>
                </div>
            </form>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <h2>Điện thoại thông minh chính hãng</h2>
            <p>Giá tốt nhất - Bảo hành dài hạn - Giao hàng toàn quốc</p>
            <a href="#products" class="btn">Mua ngay</a>
        </div>
    </section>

    <!-- Featured Products -->
    <section class="products" id="products">
        <div class="container">
            <h2 class="section-title">Sản phẩm nổi bật</h2>
            <div class="product-grid">
                <!-- Product items will be added by JavaScript -->
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="about" id="about">
        <div class="container">
            <h2 class="section-title">Về chúng tôi</h2>
            <p>Đạt Táo tự hào là địa chỉ uy tín cung cấp các sản phẩm điện thoại chính hãng với giá cả cạnh tranh nhất thị trường.</p>
            <div class="features">
                <div class="feature">
                    <i class="fas fa-shield-alt"></i>
                    <h3>Bảo hành chính hãng</h3>
                    <p>12-24 tháng tại các trung tâm bảo hành ủy quyền</p>
                </div>
                <div class="feature">
                    <i class="fas fa-truck"></i>
                    <h3>Giao hàng nhanh</h3>
                    <p>Miễn phí vận chuyển toàn quốc</p>
                </div>
                <div class="feature">
                    <i class="fas fa-headset"></i>
                    <h3>Hỗ trợ 24/7</h3>
                    <p>Đội ngũ tư vấn nhiệt tình, chuyên nghiệp</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact" id="contact">
        <div class="container">
            <h2 class="section-title">Liên hệ</h2>
            <div class="contact-container">
                <div class="contact-info">
                    <h3>Thông tin liên hệ</h3>
                    <p><i class="fas fa-map-marker-alt"></i> 123 Đường Minh Khai, Hai Bà Trưng, TP. Hà Nội</p>
                    <p><i class="fas fa-phone"></i> 01689917599</p>
                    <p><i class="fas fa-envelope"></i> info@dattao.vn</p>
                </div>
                <form class="contact-form">
                    <input type="text" placeholder="Họ và tên" required>
                    <input type="email" placeholder="Email" required>
                    <input type="tel" placeholder="Số điện thoại" required>
                    <textarea placeholder="Nội dung" required></textarea>
                    <button type="submit" class="btn">Gửi tin nhắn</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Đạt Táo</h3>
                    <p>Địa chỉ: 123 Đường Minh Khai, Hai Bà Trưng, TP. Hà Nội</p>
                    <p>Điện thoại: 01689917599</p>
                    <p>Email: info@dattao.vn</p>
                </div>
                <div class="footer-section">
                    <h3>Liên kết nhanh</h3>
                    <ul>
                        <li><a href="#home">Trang chủ</a></li>
                        <li><a href="#products">Sản phẩm</a></li>
                        <li><a href="#about">Giới thiệu</a></li>
                        <li><a href="#contact">Liên hệ</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Theo dõi chúng tôi</h3>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                        <a href="#"><i class="fab fa-tiktok"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Đạt Táo. Tất cả các quyền được bảo lưu.</p>
            </div>
        </div>
    </footer>

    <script src="js/script.js"></script>
    <script>
        // Modal functionality
        const loginModal = document.getElementById('loginModal');
        const registerModal = document.getElementById('registerModal');
        const loginBtn = document.querySelector('.login-btn');
        const registerBtn = document.querySelector('.register-btn');
        const switchToRegister = document.querySelector('.switch-to-register');
        const switchToLogin = document.querySelector('.switch-to-login');
        const closeBtns = document.querySelectorAll('.close');

        // Show modals
        if (loginBtn) {
            loginBtn.onclick = function(e) {
                e.preventDefault();
                loginModal.style.display = 'block';
            }
        }

        if (registerBtn) {
            registerBtn.onclick = function(e) {
                e.preventDefault();
                registerModal.style.display = 'block';
            }
        }

        // Switch between login and register
        if (switchToRegister) {
            switchToRegister.onclick = function(e) {
                e.preventDefault();
                loginModal.style.display = 'none';
                registerModal.style.display = 'block';
            }
        }

        if (switchToLogin) {
            switchToLogin.onclick = function(e) {
                e.preventDefault();
                registerModal.style.display = 'none';
                loginModal.style.display = 'block';
            }
        }

        // Close modals
        closeBtns.forEach(btn => {
            btn.onclick = function() {
                loginModal.style.display = 'none';
                registerModal.style.display = 'none';
            }
        });

        // Close when clicking outside
        window.onclick = function(event) {
            if (event.target == loginModal) {
                loginModal.style.display = 'none';
            }
            if (event.target == registerModal) {
                registerModal.style.display = 'none';
            }
        }

        // Show modals from URL parameters
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('login') === '1') {
                loginModal.style.display = 'block';
            } else if (urlParams.get('register') === '1') {
                registerModal.style.display = 'block';
            }
        }

        // User dropdown menu
        const userDropdown = document.querySelector('.user-dropdown');
        if (userDropdown) {
            userDropdown.addEventListener('click', function(e) {
                e.preventDefault();
                const dropdownMenu = this.nextElementSibling;
                dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.matches('.user-dropdown')) {
                    const dropdowns = document.querySelectorAll('.dropdown-menu');
                    dropdowns.forEach(dropdown => {
                        if (dropdown.style.display === 'block') {
                            dropdown.style.display = 'none';
                        }
                    });
                }
            });
        }
    </script>
</body>
</html>
